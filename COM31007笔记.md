# 线性布局

## 1.相对布局

控件的位置是相对于其他控件或者父容器而言。在进行设计的时候，需要按照控件之间的依赖关系进行排列。

```xml
<!--    增加几个按钮;
layout_centerInParent:如果为true，则表示该控件位于父控件的中央位置；
layout_centerHorizontal:如果为true，则表示该控件位于父控件的居中位置；
layout_centerVertical：如果为true，则表示该控件位于父控件的垂直居中位置；
layout_above:将该控件位于给定控件的上方。
layout_below：将该控件位于给定控件的下方。
layout_toLeftOf：将该控件的右边缘与给定Id的控件的左边缘对齐。
layout_toRightOf：将该控件的左边缘与给定Id的控件的右边缘对齐。

-->
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/bt_center"
        android:layout_centerInParent="true"
        android:text="中间" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/bt_up"
        android:layout_above="@+id/bt_center"
        android:layout_centerHorizontal="true"
        android:text="向上"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/bt_down"
        android:layout_below="@+id/bt_center"
        android:layout_centerHorizontal="true"
        android:text="向下"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/bt_left"
        android:layout_toLeftOf="@+id/bt_center"
        android:layout_centerVertical="true"
        android:text="居左"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/bt_right"
        android:layout_toRightOf="@+id/bt_center"
        android:layout_centerVertical="true"
        android:text="居右"/>
</RelativeLayout>
```



## 2.帧布局

帧布局是布局中最简单的一个布局，整个界面被当做一块空白备用区域，所有的子元素都不能指定位置进行放置，全部放置于这块区域的左上角，并且后面的子元素直接覆盖前面的子元素，将前面的子元素部分或者全部覆盖。

整个屏幕作为了一块区域，在这块区域添加多个子控件。

```xml
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
<!--    帧布局
    layout_gravity:center;居中
    -->
    <TextView
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:background="@color/purple_200"
        android:layout_gravity="center"/>
    <TextView
        android:layout_width="250dp"
        android:layout_height="250dp"
        android:background="#03A9F4"
        android:layout_gravity="center"/>
    <TextView
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:background="#E91E63"
    android:layout_gravity="center"/>
    <TextView
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:background="#FFEB3B"
        android:layout_gravity="center"/>

    </FrameLayout>
```



## 3.绝对布局

绝对布局是所有控件的排列由开发人员通过控件的坐标来指定，容器不再负责管理子控件的位置。

AbsoluteLayout：子控件的位置和布局都需要通过坐标来指定，所以，在设计布局的时候，需要开发人员提供子元素精确的横坐标和纵坐标。

绝对布局由坐标控制，缺乏灵活性，维护起来不容易。

layout_x:x坐标

layout_y:y坐标

手机上的坐标原点同PC端一样，都是在屏幕的左上角。

```xml
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
<!--绝对布局-->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="我是绝对布局"/>
    <Button
        android:layout_width="200px"
        android:layout_height="wrap_content"
        android:layout_x="300px"
        android:layout_y="300px"
        android:text="开始游戏"/>
</AbsoluteLayout>

```

## 4.表格布局

office：Excel工具

表格布局是按照行和列来组织子视图的布局，包含一系列的TableRow对象，用于定义行。

TableLayout --> TableRow

​	可以包含0个以上的单元格，每个单元格可以设置一个View视图。

landroid:stretchColumns="*" : 表示从0开始的索引项，可以拉伸，*号大体拉伸的所有列。
android:shrinkColumns="*"> ： 收缩从0开始的索引项



```xml
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="*"
    android:shrinkColumns="*">
<TextView
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:text="91热门视频下载"
    android:textColor="#FFC107"
    android:textSize="20dp"/>
<!--表格里面包含：TableRow -->
<TableRow
    android:layout_weight="1">
    <!--放置图片，ImageView;src表示图标路径；scaleType：自动适应大小-->
    <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@mipmap/ico9"
        android:scaleType="fitXY"/>
    <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@mipmap/ico5"
        android:scaleType="fitXY"/>
    <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@mipmap/ico4"
        android:scaleType="fitXY"/>
</TableRow>
<TableRow
    android:layout_weight="1">

    <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@mipmap/ico8"
        android:scaleType="fitXY"/>
    <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@mipmap/ico1"
        android:scaleType="fitXY"/>
    <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@mipmap/ico3"
        android:scaleType="fitXY"/>

</TableRow>
```

</TableLayout>

# 常用控件



所谓控件，就是程序员可以控制的组件，将来用户可以和程序进行交互的组件。

## 1.文本控件

TextView：主要用来向用户显示内容。相当于一个标签，只显示

EditText：可以用来编辑内容。	相当于一个文本框，可以编辑

------

控件最重要的是了解它的属性，了解了属性，在了解之后会更加的简单。

省略：android：打头

TextView的属性								Java代码

text  	设置TextView的内容			setText（文本）

textColor 设置文本的颜色				setTextColor（颜色）

textSize  设置文本的大小			      setTextSize(大小)

gravity   定义TextView在x轴和y轴方向上的显示方式

hint：	提示信息							 setHint(int);



EditText属性:相当于文本框			

lines：	设置行数						   setLines(int)

singleLine 单行								setSingleLine(boolean)

password	设置是否是密码		  setTransformationMethod(参数)

phoneNumber 设置内容只能是电话号码  setInputType(InputType类型)

事件监听

setOnkeyListener	对键盘事件进行监听

在前面设计布局的时候，在下面这个文件写代码。

active_main.xml

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <!--    线性布局，Ctrl+Alt+L键：格式化代码；-->
<!--
    1.行 用户名:    输入框
    2.行 密码：输入框
    3.登陆，取消
    -->
    <!-- 1.第一行线性布局：水平方式
         match_parent:表示使空间填充布局单元内的尽可能多的空间;
         wrap_content:表示使视图扩展以实现全部内容；
         -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="用户"
            android:textSize="20dp"
            android:layout_weight="1"
            android:paddingLeft="10dp"
            android:paddingTop="10dp"/>
        </LinearLayout>
</LinearLayout>
```

```xml
android:orientation="vertical"> 
```

垂直排列

代码总体实现：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <!--    线性布局，Ctrl+Alt+L键：格式化代码；-->
<!--
    1.行 用户名:    输入框
    2.行 密码：输入框
    3.登陆，取消
    -->
    <!-- 1.第一行线性布局：水平方式
         match_parent:表示使空间填充布局单元内的尽可能多的空间;
         wrap_content:表示使视图扩展以实现全部内容；
         layout_width:布局宽；
         layout_height:height:布局高度；
         text:文本内容；
         textSize：文本大小；
         layout_weight:字体粗细；
         paddingLeft：左填充；
         paddingTop：上填充；
         -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="用户"
            android:textSize="20dp"
            android:layout_weight="1"
            android:paddingLeft="10dp"
            android:paddingTop="10dp"/>
        <EditText
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="3"/>


        </LinearLayout>
    <!-- 2.第二行，线性布局，水平方式 -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="密码"
            android:textSize="20dp"
            android:layout_weight="1"
            android:paddingLeft="10dp"
            android:paddingTop="10dp"/>
        <EditText
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="3"/>


    </LinearLayout>
    <!--3.第三行，线性布局，水平方式 -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <Button
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="登陆">/>

        </Button>
        <Button
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="取消">/>

        </Button>
    </LinearLayout>
</LinearLayout>
```

除了LinearLayout线性布局外，里面，讲了三个控件；

1.TextView:显示文本提示信息；

2.EditText:输入框

3.Button:按钮



------

Xml：事件监听

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

<!--    在这里写代码，两个文本类型；TextView EditText；实现在某个EditText
写内容，显示到TextView里面。
-->
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/username"
        android:singleLine="true"
        android:text="请输入用户名"/>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:id="@+id/nameinfo"
        android:background="#2196F3"
        android:textSize="20dp"/>



</LinearLayout>
```

Java：事件监听

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

import java.security.Key;

public class MainActivity extends AppCompatActivity {
    //找到界面上的控件，将界面上的控件的值给我们的变量，通过变量来输出；
    //有点意思了。Alt+enter，导入包的类import class
    TextView nameInfo;
    EditText userName;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
    //注意，在输入框的触发一个事件，键盘的监听事件；
        //findViewById：根据id来找到控件
        userName = (EditText) findViewById(R.id.username);
        nameInfo = (TextView) findViewById(R.id.nameinfo);

        //事件监听；这个监听器里面放的是什么呢？
        //View.OnKeyListener一个接口，必须去实现这个接口的抽象方法
        userName.setOnKeyListener(new View.OnKeyListener(){

            @Override
            public boolean onKey(View view, int i , KeyEvent keyEvent) {
                String str = userName.getText().toString();
                nameInfo.setText(str);  //设置内容放到nameInfo上。
                return false;
            }

        });
        //一下子就出来3个抽象法；
        //
        userName.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence cs, int i, int start, int after) {
                        nameInfo.setText("输入前字符串："+cs.toString()+"开始位置:"+start+",结束："+after);
            }

            @Override
            public void onTextChanged(CharSequence cs, int start, int before, int count) {
                nameInfo.setText("输入后字符串："+cs.toString()+"开始位置:"+start+",个数："+count);

            }

            @Override
            public void afterTextChanged(Editable s) {
//                nameInfo.setText("输入结束后字符串："+s.toString());

            }
        });

    }
}
```

## 2.按钮控件

按钮控件就是我们平时看到的Button按钮和ImageButton控件，用的比较多，一般都是用来操纵按钮来实现相应的命令，比如说在手机上很多的查找、登录、注册、各种点击游戏等。

按钮控件名：是啥？

Button

ImageButton：

这个和Button的区别在于它是没有文本的，只有啥？图片，所以需要制定它的图片路径。

Xml按钮实现：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btn01"
        android:text="按钮1"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btn02"
        android:text="按钮2"/>
    <ImageButton
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:id="@+id/imgBtn"
        android:src="@mipmap/ico2"/>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tv_msg"
        android:textColor="@color/purple_200"
        android:textSize="100dp"/>



</LinearLayout>
```

Java 按钮实现：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.ImageButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity {
    //1.定义变量
    Button btn01,btn02;
    ImageButton imgBtn;
    TextView tv_msg;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
    //2.获取变量给，当前对象；
        btn01 = (Button) findViewById(R.id.btn01);
        btn02 = (Button) findViewById(R.id.btn02);
        imgBtn = (ImageButton) findViewById(R.id.imgBtn);
        tv_msg = (TextView) findViewById(R.id.tv_msg);

        //3.事件监听器
        btn01.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {
                tv_msg.setText("这是按钮1的事件监听方法；");
                
            }

        });
    btn02.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View view){
            tv_msg.setText("这是按钮2的事件监听方法；");

        }
    });

    imgBtn.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View view){
            tv_msg.setText("这是图片按钮的事件监听方法；");
        }

    });
    }
}
```



### 单选按钮

xml代码：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <!--单选按钮 ：RadioButton；性别：2选1 做题的时候4选1
        选中 未选中，两种状态；
        checked                     选中 未选中
        OncheckedChangeListener     设置状态转化监听事件
        如果说要让单选按钮2选1 或 4选1的需要，放到一个按钮组；
    -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="性别"/>
    <!--按钮组 -->
    <RadioGroup
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/rg_gender">

        <RadioButton
            android:id="@+id/rb_male"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:text="男" />

        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="女"
            android:layout_marginLeft="20dp"
            android:id="@+id/rb_female"/>



    </RadioGroup>

</LinearLayout>
```

Java 代码实现：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.ImageButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity {
    //1.设计变量
    RadioGroup rg_gender;
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        rg_gender = (RadioGroup) findViewById(R.id.rg_gender);
        tv = (TextView)findViewById(R.id.tv_gender);

        //设置事件监听；
        rg_gender.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup radioGroup, int i) {
                //根据选择的i值进行匹配；
                switch (i){
                    case R.id.rb_male:
                        tv.setTextColor(Color.BLUE);break;
                    case R.id.rb_female:
                        tv.setTextColor(Color.RED);break;

                }

            }
        });

    }
}
```

### 复选框的界面设计

xml代码实现：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
<!--一般用来对兴趣爱好 进行选择 比如 调查问卷 多选题
      checkbox；状态：选中和未选中两种状态，和单选按钮不同的是，可以一次性选择多个-->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="请选择你的爱好"
        android:textSize="20dp"/>
    <CheckBox
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="游戏"
        android:id="@+id/ck_game"/>
    <CheckBox
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="拳击"
        android:id="@+id/ck_boxing"/>
    <CheckBox
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="看书"
        android:id="@+id/ck_look"/>
    <CheckBox
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="音乐"
        android:id="@+id/ck_music"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="确定"
        android:id="@+id/btn_OK"/>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tv_hobby"/>




</LinearLayout>
```

Java代码实现：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.ImageButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity {
    CheckBox ck_music,ck_game,ck_boxing,ck_look;
    Button btn_ok;
    TextView tv_hobby;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        //获取变量
        ck_game = (CheckBox) findViewById(R.id.ck_game);
        ck_music = (CheckBox)findViewById(R.id.ck_music);
        ck_boxing = (CheckBox)findViewById(R.id.ck_boxing);
        ck_look = (CheckBox)findViewById(R.id.ck_look);
        btn_ok = (Button) findViewById(R.id.btn_OK);
        tv_hobby = (TextView)findViewById(R.id.tv_hobby);

        //-------------------------------------------------

        btn_ok.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View view) {
                String str = "爱好是：\n";
                //接下来针对复选框做下判断
                if(ck_game.isChecked())
                    str+=ck_game.getText().toString()+"\n";
                if(ck_music.isChecked())
                    str+=ck_music.getText().toString()+"\n";
                if(ck_boxing.isChecked())
                    str+=ck_boxing.getText().toString()+"\n";
                if(ck_look.isChecked())
                    str+=ck_look.getText().toString()+"\n";

                //判断完后设置到tv_hobby里
                tv_hobby.setText(str);



            }
        });
    }
}
```

### 图像按钮的界面设计

Xml代码实现：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
<!--ImageView   图片控件；Drawable对象或者是bitmap对象
    src:路径图片
    maxHeight/maxWidth
    scaleType:调整尺寸
    -->
    <androidx.constraintlayout.utils.widget.ImageFilterView
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:src="@mipmap/ico11"
        android:id="@+id/myImg"/>
    <RadioGroup
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/rg_scale">
        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rb_center"
            android:text="Center"/>
        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rb_centerCrop"
            android:text="CenterCrop"/>

        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rb_centerInside"
            android:text="CenterInside"/>
        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rb_fitEnd"
            android:text="fitEnd"/>
        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rb_rb_fitStart"
            android:text="fitStart"/>


    </RadioGroup>


</LinearLayout>
```

Java代码实现：

```JAVA
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.ImageButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity {
    ImageView myImg;
    RadioGroup rg_scale;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        myImg = (ImageView) findViewById(R.id.myImg);
        rg_scale= (RadioGroup)findViewById(R.id.rg_scale);

        //针对单选按钮做下测试：
        rg_scale.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener(){
            @Override
            public void onCheckedChanged(RadioGroup radioGroup,int i){
                switch (i){
                    case R.id.rb_center:
                        myImg.setScaleType(ImageView.ScaleType.CENTER);break;
                    case R.id.rb_centerCrop:
                        myImg.setScaleType(ImageView.ScaleType.CENTER_CROP);break;
                    case R.id.rb_centerInside:
                        myImg.setScaleType(ImageView.ScaleType.CENTER_INSIDE);break;
                    case R.id.rb_fitEnd:
                        myImg.setScaleType(ImageView.ScaleType.FIT_END);break;
                    case R.id.rb_rb_fitStart:
                        myImg.setScaleType(ImageView.ScaleType.FIT_START);break;
                }
            }
        });

        //-------------------------------------------------

    }
}
```

### 日期时间控件

------

日期时间控件：

DatePicker和TimePicker

DatePicker：向用户提供年、月、日的日期数据，并允许用户进行选择；

监听：OnDateChangedListener事件

TimePick：向用户提供一天中的时间数据，并允许用户进行选择；

监听：OnTimeChangListener事件

Xml代码如下：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <DatePicker
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/my_dp"
        android:layout_gravity="center_horizontal"/>
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="当前选择的时间"
            android:textSize="30dp"/>
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/tv_msg"
            android:textSize="30dp"
            android:textColor="@color/purple_200"/>


</LinearLayout>
```

Java代码如下：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.ImageButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity {
    DatePicker my_dp;
    TextView tv_msg;
    int year;
    int month;
    int day;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        my_dp = (DatePicker)findViewById(R.id.my_dp);
        tv_msg = (TextView)findViewById(R.id.tv_msg);

        my_dp.init(year,month,day,new DatePicker.OnDateChangedListener(){
            @Override
            public void onDateChanged(DatePicker view,int y, int m, int d){

                MainActivity.this.year = y;
                MainActivity.this.month = m;
                MainActivity.this.day = d;
                tv_msg.setText(year+"年"+month+"月"+day+"日");
            }
        });

    }
}
```



### 开关与切换按钮控件

App里面，打开、关闭的情况。Switch（开关控件）、ToggleButton（切换按钮控件）

Switch开关控件

showText 	 是否显示文字

splitTrack 	是否设置一个间隙，让滑块与底部图片分割

checked		设置是否选中

ToggleButton控件

disableAlpha		在禁用的时候，透明度

textOff 				  没有选中的时候文字

textOn				  被选中的时候显示的文字

Xml实现代码：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="消息通知"
        android:textSize="20dp"/>
     <Switch
         android:layout_width="match_parent"
         android:layout_height="50dp"
         android:id="@+id/sw_sound"
         android:text="声音"
         android:switchMinWidth="50dp"
         android:showText="true"
         android:textSize="20dp"
         android:layout_marginLeft="20dp"/>
     <Switch
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:id="@+id/sw_vabrate"
        android:text="震动"
        android:switchMinWidth="50dp"
        android:showText="true"
        android:textSize="20dp"
        android:layout_marginLeft="20dp"/>

     <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="网络设置"
        android:textSize="20dp"/>
     <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="飞行模式"
            android:textSize="20dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="20dp"/>
        <ToggleButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/tb_flying"
                android:layout_gravity="right"/>
        </LinearLayout>
     <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="移动数据"
            android:textSize="20dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="20dp"/>
        <ToggleButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/tb_digital"
            android:layout_gravity="right"/>
     </LinearLayout>
     <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="当前设置为："
            android:textSize="20dp"/>
    <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/tv_setting"
            android:textSize="20dp"/>


</LinearLayout>
```

Java代码实现：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.RadioGroup;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity implements CompoundButton.OnCheckedChangeListener {
    Switch sw_sound,sw_vabrate;
    ToggleButton tb_flying,tb_digital;
    TextView tv_setting;



    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        sw_sound = (Switch)findViewById(R.id.sw_sound);
        sw_vabrate = (Switch) findViewById(R.id.sw_vabrate);
        tb_flying = (ToggleButton)  findViewById(R.id.tb_flying);
        tb_digital = (ToggleButton)  findViewById(R.id.tb_digital);
        tv_setting = (TextView)  findViewById(R.id.tv_setting);

        //这4个对象，监听事件，放的是本身；发现这下面的this不再报错；
            //这时候，当前类对象作为参数，传到监听事件了
        sw_sound.setOnCheckedChangeListener(this);
        sw_vabrate.setOnCheckedChangeListener(this);
        tb_flying.setOnCheckedChangeListener(this);
        tb_digital.setOnCheckedChangeListener(this);


    }

    /**
     * 重写该方法，则不会报错，现在合并到一起。
     * @param compoundButton
     * @param b
     */
    @Override
    public void onCheckedChanged(CompoundButton view, boolean isChecked){
        String str = "";
        switch (view.getId()){
            case R.id.sw_sound:
                str =isChecked?"声音：打开":"声音：关闭";
                break;
            case R.id.sw_vabrate:
                str =isChecked?"震动：打开":"震动：关闭";
                break;
            case R.id.tb_flying:
                str =isChecked?"飞行模式：打开":"飞行模式：关闭";
                break;
            case R.id.tb_digital:
                str =isChecked?"移动数据：打开":"移动数据：关闭";
                break;
        }
        //目的不是显示：
        tv_setting.setText(str);
    }
}
```



------

## 高级控件

### 1.自动完成文本控件

------

> 在搜索引擎（百度、搜狗）输入几个文字，会出来一些提示。可以减少用户的输入，提高程序的效率。
>
> 百度的自动提示，是ajax技术。

1.AutoCompleteTextView

​		取消下拉：Esc 或 BackSpace键

步骤：

1.定义一个字符串数组（有后台了，从后台读取），用于保存自动提示的数据。

2.将此字符串数组放入到数组适配器（ArrayAdapter）。

3.利用AutoCompleteTextView的SetAdapter（）方法，将字符串数组放入到AutoCompleteTextView对象中，设置自动完成文本控件的适配器。



2.MutilAutoCompleteTextView



单行自动完成文本控件Xml代码如下：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="自动完成文本实例"
        android:textSize="20dp"/>
    <!--加入实例 -->
    <AutoCompleteTextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myAuto"
        android:hint="请输入您需要的名字"/>


</LinearLayout>
```

单行自动完成文本控件Java代码如下：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.RadioGroup;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity  {
    //定义字符串数组；
    String[]arr = {"Coco","Candice","Jisoo","Yummy"};
    AutoCompleteTextView myAuto;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------


        //获取内容
        //1.当前对象，单行项目行；填充内容
        ArrayAdapter<String> adapter = new ArrayAdapter<>(this, android.R.layout.simple_dropdown_item_1line,arr);
        myAuto=(AutoCompleteTextView) findViewById(R.id.myAuto);

        myAuto.setAdapter(adapter);
        //设置显示自动提示需要的字符串
        myAuto.setThreshold(1);



        }
}
```



多行自动..xml

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="自动完成文本实例"
        android:textSize="20dp"/>
    <!--加入实例 -->
    <AutoCompleteTextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myAuto"
        android:hint="请输入您需要的城市"/>

    <!--加入多行 -->
    <MultiAutoCompleteTextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myMulti"
        android:hint="请输入名称"/>
</LinearLayout>
```

多行自动..Java

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.MultiAutoCompleteTextView;
import android.widget.RadioGroup;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity  {
    //定义字符串数组；
    String[]arr = {"Coco","Candice","Jisoo","Yummy"};
    AutoCompleteTextView myAuto;
    MultiAutoCompleteTextView myMulti;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------


        //获取内容
        //1.当前对象，单行项目行；填充内容
        ArrayAdapter<String> adapter = new ArrayAdapter<>(this, android.R.layout.simple_dropdown_item_1line,arr);
        myAuto=(AutoCompleteTextView) findViewById(R.id.myAuto);
        myMulti=(MultiAutoCompleteTextView) findViewById(R.id.myMulti);


        myAuto.setAdapter(adapter);
        //设置显示自动提示需要的字符串
        myAuto.setThreshold(1);
        //------------------------------------------
        myMulti.setAdapter(adapter);
        myMulti.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer());
        myMulti.setThreshold(1);



        }
}
```

### 2.下拉列表控件

------

Spinner，当用户单击该控件的时候，弹出选择列表供用户选择，且只能选择一项。同网页中的Select,同C#中的Combox.

使用步骤：

1.先定义一个字符串数组，用于保存下拉列表的数据;在实际使用中，可以从数据库获取数据;

2.将此字符串数组存入数组适配器（ArrayAdapter）

3.利用Spinner的setAdapter（）方法，将适配器加入到Spinner对象中，设置自动完成文本框的适配器。

属性：

spinnerMode：			设置下拉列表的模式; dialog 或者dropdown

dropDownWidth		getDropDownWidth()

​									 setDropDownWidth（int pix）	设置下拉框的宽度

gravity									 getGravity()/setGravity() 	设置选定项目的对齐方式

事件	

​				setOnItemSelectedListener(AdapterView.OnItemSelectedListener)	当列表被选中时触发的事件

------

xml代码：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
   <!--设计界面 -->
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tv"
        android:text="请选择城市"
        android:textSize="20dp"/>
    <Spinner
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/citySp"
        android:spinnerMode="dialog"/>
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tv_city"
        android:textSize="20dp"/>


</LinearLayout>
```

Java代码：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.MultiAutoCompleteTextView;
import android.widget.RadioGroup;
import android.widget.Spinner;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;

public class MainActivity extends AppCompatActivity  {
    //变量和数据的声明
    TextView tv_city;
    Spinner citySp;
    //字符串
    String[]arr={"深圳","东莞","珠海","哈尔滨"};





    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        tv_city = (TextView) findViewById(R.id.tv_city);
        citySp = (Spinner) findViewById(R.id.citySp);


        //适配器:和自动完成文本一致
        ArrayAdapter<String >adapter = new ArrayAdapter<>(this, android.R.layout.simple_spinner_item,arr);

        citySp.setAdapter(adapter);
        //下拉列表的事件
        citySp.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,int position,long id){
                //当我们在下拉列表上单击
                tv_city.setText(arr[position]);

            }

            @Override
            public void onNothingSelected(AdapterView<?> adapterView){

            }
        });


        }
}
```

------

### 3.进度条和滑块

------

进度条：

用于某些资源的加载，文件下载和大量数据的处理等，使用进度条为用户提供明确的操作结束时间，让用户能够了解目前程序的进度及其状态。

#### 3.1 ProgressBar

​	属性：

​	max 		getMax()  setMax()   			设置或获取进度条的上限

​	progress getProgress() setProgress() 设置或获取进度条的进度

xml代码：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="文件下载进度"
        android:textSize="20dp"/>
    <ProgressBar
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/fileDown"
        style="?android:attr/progressBarStyleHorizontal"/>
    <ProgressBar
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="模拟文件下载"
        android:id="@+id/btn_progress"/>


</LinearLayout>
```

Java代码如下：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.MultiAutoCompleteTextView;
import android.widget.ProgressBar;
import android.widget.RadioGroup;
import android.widget.Spinner;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;
import java.util.Random;

public class MainActivity extends AppCompatActivity  {

    ProgressBar fileDown;
    Button btn_progress;

    int progress = 0;
    int max = 102400;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        fileDown = (ProgressBar) findViewById(R.id.fileDown);
        btn_progress = (Button) findViewById(R.id.btn_progress);

        //设置进度条的最大值
        fileDown.setMax(max);
        //设置按钮的事件
        btn_progress.setOnClickListener(new View.OnClickListener(){

            @Override
            public void onClick(View view){
                //一步一步来
                int seed = max-progress;
                Random random = new Random();
                int current = random.nextInt(seed);

                progress = progress + current;
                fileDown.setProgress(progress);
            }

        });
    }
}
```

------

#### 3.2  滑块

------

SeekBar控件; 用来接受用户输入的控件，类似于拖动条，可以直观的显示用户需要的数据。可以显示数值。也可以设置标度。

设置音量,使用滑块。

Xml代码：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="调节音量"
        android:textSize="20dp" />
    <!--滑块-->
    <SeekBar
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/sk_vol"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/tv_cur"/>



</LinearLayout>
```

Java代码如下：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.content.Context;
import android.graphics.Color;
import android.media.AudioManager;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.MultiAutoCompleteTextView;
import android.widget.ProgressBar;
import android.widget.RadioGroup;
import android.widget.SeekBar;
import android.widget.Spinner;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;
import java.util.Random;

public class MainActivity extends AppCompatActivity  {
    SeekBar sk_vol;
    TextView tv_curr;
    AudioManager myAudio;





    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------

        sk_vol = (SeekBar) findViewById(R.id.sk_vol);
        tv_curr = (TextView) findViewById(R.id.tv_curr);

        //声音这个    这个是获取系统的声音服务类
        myAudio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

        int maxvol = myAudio.getStreamMaxVolume(AudioManager.STREAM_MUSIC);// 声音最大值
        int sysCurvol = myAudio.getStreamVolume(AudioManager.STREAM_MUSIC);// 系统声音

            //设置滑块和声音的关系
        sk_vol.setMax(maxvol);
        sk_vol.setProgress(sysCurvol);
        /**
         * 有三个方法需要重写
         */
        sk_vol.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            /*
                重写该方法即可
             */
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
                // 获取一个中间变量;
                int tempInt = seekBar.getProgress(); //获取当前进度条数值
                if (tempInt<1)
                    tempInt = 1;
                myAudio.setStreamVolume(AudioManager.STREAM_MUSIC,tempInt,0);

                //设置声音提示
                tv_curr.setText("当前声音为："+tempInt);
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        });
    }
}
```

------

### 4.列表视图

------

listView是一个常用的控件，会根据屏幕大小，把具体的内容以列表的形式显示出来，例如电话本、通信记录等。

#### 属性：

choiceMode 	选择模式：list没有选择模式；singleChoice ：一项选中； multipleChoice：多项选中。

divider:			项目之前用某个图形或颜色来分割。

dividerHeight  分割符的高度。

#### 方法

setOnItemClickLister(AdapterView.OnItemClickListener) 列表项被单击时触发的事件

setOnItemSelectedListener(AdapterView.OnItemSelectedListener)当列表项改变时被触发的事件

getCheckedItemIds()			返回检查项目标识的集合。

##### Xml代码

###### 在activity_main.xml文件中：

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="列表视图案例"
        android:textSize="20dp"/>
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btn_arr"
        android:text="使用ArrayAdapter为ListView绑定数据"/>
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btn_simple"
        android:text="使用SimpleAdapter为ListView绑定数据"/>


</LinearLayout>
```

###### 在arrayadapter.xml中：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="这是一个ArrayAdapter案例"
        android:textSize="20dp"/>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tv_content"/>
    <!--arrayList，分割颜色：#555555，行高5px -->
    <ListView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/arrayList"
        android:divider="#555555"
        android:dividerHeight="5px"/>


</LinearLayout>
```

###### 在simpleadapter.xml中：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!--设置界面 -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="热歌排行榜"
        android:textSize="20dp"/>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="歌曲"
            android:layout_weight="1"/>
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="歌手"
            android:layout_weight="1"/>
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="时长"
            android:layout_weight="1"/>
    </LinearLayout>
    <ListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="#555555"
        android:dividerHeight="1dp"
        android:id="@+id/simpleAdapter"/>

</LinearLayout>
```

###### 在list.xml中

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <!-- 设计界面  -->
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:id="@+id/song_name"/>
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:id="@+id/signer"/>
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:id="@+id/album"/>
    <!--横向线性布局，4个TextView -->
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:id="@+id/duration"/>


</LinearLayout>
```

##### Java代码

###### 在MainActivity.java中：

```java
package com.example.hqq02;
//这个是包的定义
//import 导入相关的类
import androidx.appcompat.app.AppCompatActivity;

import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.media.AudioManager;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.MultiAutoCompleteTextView;
import android.widget.ProgressBar;
import android.widget.RadioGroup;
import android.widget.SeekBar;
import android.widget.Spinner;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.ImageButton;
import android.widget.ToggleButton;


import java.security.Key;
import java.util.Random;

public class MainActivity extends AppCompatActivity  {
    Button btn_arr;
    Button btn_simple;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//-----------------------------------------------------
        btn_arr = (Button) findViewById(R.id.btn_arr);
        btn_simple = (Button) findViewById(R.id.btn_simple);

        btn_arr.setOnClickListener(new View.OnClickListener(){
            /**
             * 需要用到后面的技术点；
             * @param view
             */
            @Override
            public void onClick(View view){
                Intent intent = new Intent();
                //需要增加该类
                intent.setClass(MainActivity.this,ArrayAdapterActivity.class);
                //启动
                startActivity(intent);
            }
        });

        btn_simple.setOnClickListener(new Button.OnClickListener(){

            @Override
            public void onClick(View view){
                Intent intent = new Intent();
                //需要增加该类
                intent.setClass(MainActivity.this,SimpleAdapterActivity.class);
                //启动
                startActivity(intent);
            }
        });
    }
}
```

###### 在ArrayAdapterActivity.java文件中：

```java
package com.example.hqq02;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.app.Activity;

public class ArrayAdapterActivity extends Activity {
    /* 定义我们需要的类的对象*/
    ListView listView;
    ArrayAdapter<String> adapter;
    TextView tv_Content;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //加载某个XML文件，设置界面视图
        setContentView(R.layout.arrayadapter);
        //----------------------------------------------------------------
        listView = (ListView) findViewById(R.id.arrayList);
        //星期数组
        final String[] weekList = {"周一", "周二", "周三", "周四", "周五", "周六", "周日"};
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, weekList);

        listView.setAdapter(adapter);

        //设置监听事件；
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                tv_Content = (TextView) findViewById(R.id.tv_content);
                tv_Content.setText("您的选择是：" + weekList[position]);
            }


        });


    }
}
```

###### 在SimpleAdapterActivity中：

```java
package com.example.hqq02;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;

import java.util.HashMap;
import java.util.Map;
import java.util.List;

import androidx.annotation.Nullable;

import java.util.ArrayList;
import java.util.Map;

public class SimpleAdapterActivity extends Activity {

    //1.声明变量
    String[]songs = new String[]{"国歌","歌唱祖国","夏天的风","无人之岛"};
    String[]singer = new String[]{"聂耳","无","Uu","任然"};
    String[]albums = new String[]{"国歌","歌唱祖国","夏天的风","无人之岛"};
    String[]duratioins = new String[]{"3:56","3:17","4:45","4:37"};

    ListView listView;

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simpleadapter); //获取布局XML

        //
        listView = (ListView) findViewById(R.id.simpleAdapter);
        //泛型+Map集合
        List<Map<String,Object>>listItem = new ArrayList<Map<String,Object>>();
        for (int i=0;i<songs.length;i++){
            Map<String,Object>item=new HashMap<String,Object>(); //Map的好处是可以用HashMap，键值对的形式
            item.put("song",songs[i]);
            item.put("singer",singer[i]);
            item.put("album",albums[i]);
            item.put("duratioin",duratioins[i]);

            listItem.add(item);

        }
        SimpleAdapter myAdapter = new SimpleAdapter(getApplicationContext(),listItem,
                R.layout.list,
                new String[]{"song","singer","album","duratioin"},
                new int []{R.id.song_name,R.id.signer,R.id.album,R.id.duration});
        //绑定
        listView.setAdapter(myAdapter);
    }
}
```

##### 在main文件夹下

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.hqq02">

    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.Hqq02"
        tools:targetApi="31">
        <activity
            android:name=".MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <!--再启动其他的两个Activity -->
        <activity android:name=".ArrayAdapterActivity"></activity>
        <activity android:name=".SimpleAdapterActivity"></activity>
    </application>

</manifest>
```

-----

### 5.网格视图

GridView 顾名思义：以二维表格的形式显示在表格中，组件条目是ListAdapter和该组件关联

常用属性和方法：

columnWidth 		列的宽度

android:gravity	  组件中的内容在组件中的位置。

hozizontalSpacing 两列之间的间距

numColumns 		列数

stretchMode 		缩放模式

columnWidth:	   列有空闲空间就加宽列

spacingWidth:	  列有空闲空间，就加宽各列间距

spacingWidthUniform	宽度平均分配

常用方法：

setOnItemClickListener()							当列表项被单击时触发的事件

setOnItemSelectedListner()						当列表项被改变时触发的事件

setOnItemLongClickListener()					当列表项被长时间按住触发的事件

使用案例：

目的：

使用GridView来显示汽车logo，并且显示在列表中选择的汽车logo的实例。

#### 1.完成activity_main.xml 文件

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:text="汽车车标列表" />

    <TextView
        android:id="@+id/tv_carlogo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="12dp"
        android:textSize="20dp" />
    <!--放置gridview-->
    <GridView
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnWidth="20dp"
        android:numColumns="4"
        android:stretchMode="spacingWidthUniform" />


</LinearLayout>
```



#### 2.增加grid_item.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:layout_marginTop="10dp"
        android:id="@+id/img"
        android:layout_gravity="center"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/text"
        android:layout_marginTop="2dp"
        android:layout_gravity="center"/>


</LinearLayout>
```

#### 3.修改主界面MainActivity.java代码



```java
package com.example.project_gridview;

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.GridView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class MainActivity extends AppCompatActivity {
    //声明变量和对象
    GridView gridView;
    TextView tv_carlogo;
    //定义了一个List泛型集合
    List<Map<String,Object>> dataList;
    //单一适配器
    SimpleAdapter adapter;



    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //--------初始化操作---------
        gridView = (GridView)findViewById(R.id.gridview);
        tv_carlogo = (TextView) findViewById(R.id.tv_carlogo);
        //找车标的图片
        int icno [] = {R.mipmap.ico1,R.mipmap.ico2,R.mipmap.ico3,R.mipmap.ico4,R.mipmap.ico1,R.mipmap.ico2,R.mipmap.ico3,R.mipmap.ico4};
        //字符串数组，车标名；
        String name [] ={"宾利","宝马","吉利","奥迪","宾利","宝马","吉利","奥迪"};
        //设置List泛型
        dataList = new ArrayList<>();
        for (int i=0;i<icno.length;i++){
            Map<String,Object>map = new HashMap<>();
            map.put("img",icno[i]);
            map.put("name",name[i]);
                    dataList.add(map);
        }
            //设置适配器
        adapter = new SimpleAdapter(this,dataList,R.layout.griditem,new String[]{"img","text"},new int[]{R.id.img,R.id.text});
            //给gridview设置适配器
        gridView.setAdapter(adapter);
            //给gridView增加事件监听；
        gridView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> parent, View view,int position , long id){
                tv_carlogo.setText("您选择的车标是："+name[position].toString());
            }
        });

    }
}
```

----------------

### 6.画廊控件

顾名思义：针对图片而设计的控件，用于图片浏览。

Gallery,水平滚动的列表，用于显示图片等资源，可以使图片在屏幕上通过手指的滑动来显示。

属性：

android:animationDuration		设置布局变化的时候动画的切换所需的时间。

android:gravity							  指定对象在x轴，y轴如何来放置内容。

android:spacing							 图片之间的间距

android:unselectedAlpha			设置未被选中的透明度

#### 1.完成activity_main.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="这是一个画廊控件的案例"/>
    <Gallery
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/mygallery"/>




</LinearLayout>
```

#### 2.完成主界面MainActivity.java代码

```java
package com.example.project_gallery;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {
    //修改主类
    //1.变量 对象
    private Gallery myGallery;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //-----------------------------------------
        myGallery = (Gallery)findViewById(R.id.mygallery);
        //这里需要设置一个Adapter
        myGallery.setAdapter(new ImageAdapter(this));
        myGallery.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Toast.makeText(MainActivity.this,"点击了第"+(position+1)+"张图片",Toast.LENGTH_LONG).show();
            }
        });

    }
}
```

#### 3.增加ImageAdapter.java代码

```java
package com.example.project_gallery;

import android.content.Context;
import android.content.Intent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;

/**
 * 定义了一个图片的适配器
 */
public class ImageAdapter extends BaseAdapter {
    private Context myContext;
    //定义一个数组
    private Integer[]myImg={R.mipmap.ico1,R.mipmap.ico2,R.mipmap.ico3,R.mipmap.ico4};

    //在该类的初始化的时候，构造函数里面
    public ImageAdapter(Context c){
        myContext = c;

    }

    @Override
    public int getCount(){
        return myImg.length;
    }
    @Override
        public Object getItem(int position){
        return myImg[position];
    }
    @Override
    public long getItemId(int position){
        return position;
    }

    /**
     * 获取视图
     * @param position
     * @param converView
     * @param parent
     * @return i
     */
    @Override
    public View  getView(int position, View converView, ViewGroup parent){
        //这里面有一个ImageView
        ImageView i= new ImageView(myContext);
        i.setImageResource(myImg[position]); //从第几个图片过来
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setLayoutParams(new Gallery.LayoutParams(800,800));
        return i;

    }
}

```

-----------

### 7.建立menu及menu文件

因为AS没有默认的menu文件，需要开发者自己创建，在res文件夹下创建Android Resource 文件夹，名叫menu文件夹，该文件夹下创建Android Resource.xml文件。

#### 1.完成activity_main.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--这里是以menu开头的自定义标签 -->
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <!--创建4个小选项;showAsAction:ifRoom
     ifRoom:表示有位置才显示；always：总是显示在界面上；never：从不显示在界面上；-->
    <item
        android:icon="@mipmap/sousuo"
        android:title="搜索"
        android:id="@+id/action_find"
        app:showAsAction="ifRoom"/>
    <item
        android:icon="@mipmap/fenxiang"
        android:id="@+id/fenxiang"
        android:title="分享"
        app:showAsAction="ifRoom"/>
    <item
        android:title="设置"
        android:id="@+id/item1"
        app:showAsAction="never"/>
    <item
        android:title="设置"
        android:id="@+id/item2"
        app:showAsAction="never"/>


</menu>
```



#### 2.完成base_toolbar_menu.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--这里是以menu开头的自定义标签 -->
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <!--创建4个小选项;showAsAction:ifRoom
     ifRoom:表示有位置才显示；always：总是显示在界面上；never：从不显示在界面上；-->
    <item
        android:icon="@mipmap/sousuo"
        android:title="搜索"
        android:id="@+id/action_find"
        app:showAsAction="ifRoom"/>
    <item
        android:icon="@mipmap/fenxiang"
        android:id="@+id/fenxiang"
        android:title="分享"
        app:showAsAction="ifRoom"/>
    <item
        android:title="设置"
        android:id="@+id/item1"
        app:showAsAction="never"/>
    <item
        android:title="关于"
        android:id="@+id/item2"
        app:showAsAction="never"/>


</menu>
```

#### 3.完成MainActivity.java文件

```java
package com.example.toolbardemo;

import androidx.appcompat.app.AppCompatActivity;

import android.graphics.Color;
import android.os.Bundle;
import android.widget.Toolbar;

public class MainActivity extends AppCompatActivity {
    Toolbar toolbar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //----------------------------------------------
        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        //导航加一个后退
        toolbar.setNavigationIcon(R.mipmap.houtui);
        toolbar.setTitle("首页");
        toolbar.setTitleTextColor(Color.WHITE);
        //菜单文件
        toolbar.inflateMenu(R.menu.base_toolbar_menu);

    }
}
```

------------

# 工具栏

1.显示程序所处的位置。

2.提供一些重要的交互功能，比如说搜索等。

3.实现导航功能，例如返回按钮等。

常用属性和方法：

app:title 		setTitle(参数)			设置应用程序主题

app:subtilte	 setSubtitle（参数）设置小标题

app:navigation	setNavigation(int resld)	导航图标

logo					 setLogo(Drawable drawable)	程序logo

titleTextColor 	setTitleTextColor(int Color)	设置标题文字颜色



### 1.底部导航栏（报错）

----

手机程序：QQ 拼多多 微信等，都会在程序下方位置放置导航。好处是可以进行单手操作，即用户单手完成界面切换，从而查看不同的信息。

1.1	BottomNavigationView类

​	用到了Fragement的知识，每个item都有一个icon和一个title组成，单击控制状态即可。

​	***以：通话（电话）通信录    设置 为例***



#### 1.完成bottom_nav_menu.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<!--底部导航栏需要的菜单文件 -->
    <item
        android:id="@+id/phone"
        android:icon="@mipmap/telephone"
        android:title="电话" />

    <item
        android:id="@+id/contract"
        android:icon="@mipmap/contract"
        android:title="通信录" />

    <item
        android:id="@+id/setting"
        android:icon="@mipmap/setting"
        android:title="设置" />

</menu>
```

#### 2.增加phonefragment.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!--电话所对应的小程序 -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="这是记录"
        android:gravity="center"
        android:textSize="30dp"/>


</LinearLayout>
```

#### 3.增加contactfragment.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!--通信录所对应的小程序 -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="这是通信录"
        android:gravity="center"
        android:textSize="30dp"/>


</LinearLayout>
```

#### 4.增加settingfragment.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!--设置所对应的小程序 -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="这是设置"
        android:gravity="center"
        android:textSize="30dp"/>


</LinearLayout>
```

----

***注意所有的xml文件对应的java文件都新建到bottomnavdemo文件夹下***

#### 5.编写PhoneFragment.java

```java
package com.example.bottomnavdemo;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
//这个类，对应一个电话类

public class PhoneFragment extends Fragment{
    //重写一个方法，创建视图的方法；
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState){
        //调用界面文件，将文件加到容器中，
        return inflater.inflate(R.layout.phonefragment,container,false);

    }
}

```

#### 6.编写ContactFragment.java

```java
package com.example.bottomnavdemo;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
//这个类，对应一个电话类

public class PhoneFragment extends Fragment{
    //重写一个方法，创建视图的方法；
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState){
        //调用界面文件，将文件加到容器中，
        return inflater.inflate(R.layout.contactfragment,container,false);

    }
}

```

#### 7.编写SettingFragment.java

```java
package com.example.bottomnavdemo;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
//这个类，对应一个电话类

public class PhoneFragment extends Fragment{
    //重写一个方法，创建视图的方法；
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState){
        //调用界面文件，将文件加到容器中，
        return inflater.inflate(R.layout.settingfragment,container,false);

    }
}

```

#### 8.编写MainActivity.java

```java

```

## 2.可扩展列表视图

---

一般用于数据的展开和折叠这种场景，即可以单独展开的列表视图

ExpandableListView，是ListView的子类。本质上是一个AdapterView，既然是AdapterView，在显示数据的时候，就需要使用到适配器。适配器叫ExpandableAdapter，这个类派生于BaseExpandableListAdapter，需要重写setOnGroupClickListener()、setOnChildClickListener()、setOnGroupCollpaseListener()、setOnGroupExpandListener()方法。

实例

展示河南省、陕西省行政区信息的实例。

### 1.修改主界面

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">
    <!--    主界面就是可扩展列表;android:groupIndicator="@null" 取值可以是任意的Drawable对象，不再显示groupIndicator -->
    <ExpandableListView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/expand_list"
        android:groupIndicator="@null"/>

</LinearLayout>
```

### 2.增加expand_parent_item.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:background="#3f60CC"
    android:layout_height="50dp">
    <!-- 设计列表项的布局   -->
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:id="@+id/parent_tv"
        android:textColor="#fff"
        android:gravity="center_vertical"
        android:paddingLeft="10dp"
        android:textSize="18sp"/>
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/parent_img"
        android:layout_alignParentRight="true"
        android:src="@mipmap/right"
        android:paddingRight="10dp"/>
</RelativeLayout>
```

### 3.增加expand_children_item.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!--    设计列表项的具体数据的布局-->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:id="@+id/children_item"
        android:gravity="center_vertical"
        android:paddingLeft="10dp"/>
</LinearLayout>
```

4.增加适配器代码

```java
package com.example.expanddemo;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ExpandableListViewAdapter extends BaseExpandableListAdapter {
    //1.成员变量
    private String[]groups;
    private String[][]childs;
    private Context context;

    //构造方法，和IDEA一样。
    public ExpandableListViewAdapter(Context context,String[] groups, String[][] childs) {
        this.groups = groups;
        this.childs = childs;
        this.context = context;
    }

    @Override
    public int getGroupCount() {
        return groups.length;
    }

    @Override
    public int getChildrenCount(int i) {
        return childs[i].length;
    }

    @Override
    public Object getGroup(int i) {
        return groups[i];
    }

    @Override
    public Object getChild(int i, int i1) {
        return childs[i][i1];  //?
    }

    @Override
    public long getGroupId(int i) {
        return i;
    }

    @Override
    public long getChildId(int i, int i1) {
        return i1;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    /**
     * 用于加载并显示列表项元素。
     * @param groupPosition   为组位置
     * @param isExpanded       是否折叠或伸缩状态
     * @param convertView      重用已经的视图对象
     * @param parent            返回视图所衣服的视图组。
     * @return
     */
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        TextView tv_grouptext;
        ImageView img_group;
        convertView= LayoutInflater.from(parent.getContext()).inflate(R.layout.expand_parent_item,parent,false);
        tv_grouptext=convertView.findViewById(R.id.parent_tv);
        img_group=convertView.findViewById(R.id.parent_img);
        tv_grouptext.setText(groups[groupPosition]);

        if(isExpanded)
            img_group.setImageResource(R.mipmap.down);
        else
            img_group.setImageResource(R.mipmap.right);

        return convertView;
    }

    /**
     * 重写getChildView()方法.
     * isLastChild:表示是否为最后一项列表数据。
     * @param groupPosition
     * @param childPosition
     * @param isLastChild
     * @param convertView
     * @param parent
     * @return
     */
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        //映射列表数据使用的布局文件
        convertView=LayoutInflater.from(parent.getContext()).inflate(R.layout.expand_children_item,parent,false);
        //获取列表数据对应的控件
        TextView tv_children_item=(TextView) convertView.findViewById(R.id.children_item);
        //显示列表数据
        tv_children_item.setText(childs[groupPosition][childPosition]);
        return convertView;
    }

    @Override
    public boolean isChildSelectable(int i, int i1) {
        return true;
    }
}
```

### 4.增加MainActivity.java

```java
package com.example.expanddemo;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.widget.ExpandableListView;
import android.widget.Toast;
import android.view.View;

public class MainActivity extends AppCompatActivity {
    //1.变量 对象
    ExpandableListView expand_list_id;
    String [] groups ={"河南省","陕西省"};
    String [] []childs = {{"郑州市","安阳市","驻马店市"},{"西安市","咸阳市","宝鸡市"}};


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //--------------------------------------------------------
        initViews();// 这个是个自定义的方法



    }

    private void initViews(){
        expand_list_id = (ExpandableListView)findViewById(R.id.expand_list);
        ExpandableListViewAdapter adapter = new ExpandableListViewAdapter(this,groups,childs);
        expand_list_id.setAdapter(adapter);
        expand_list_id.expandGroup(0);
        //监听事件
        expand_list_id.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener(){
            @Override
            public boolean onGroupClick(ExpandableListView expandableListView,View view,int groupPosition, long l){
                Toast.makeText(MainActivity.this,"你单击了"+groups[groupPosition],Toast.LENGTH_LONG).show();
                return false;
            }
        });

        //监听事件2
        expand_list_id.setOnChildClickListener(new ExpandableListView.OnChildClickListener(){

            @Override
            public boolean onChildClick(ExpandableListView expandableListView, View view,int groupPosition,int childPosition,long l){
                Toast.makeText(MainActivity.this,"你单击了"+childs[groupPosition][childPosition],Toast.LENGTH_LONG).show();
                return false;
            }

        });

        //监听事件3
        expand_list_id.setOnGroupCollapseListener(new ExpandableListView.OnGroupCollapseListener() {
            @Override
            public void onGroupCollapse(int groupPosition) {
                Toast.makeText(MainActivity.this, "你收缩了"+groups[groupPosition], Toast.LENGTH_LONG).show();
            }
        });
        //监听事件4
        expand_list_id.setOnGroupExpandListener(new ExpandableListView.OnGroupExpandListener() {
            @Override
            public void onGroupExpand(int groupPosition) {
                Toast.makeText(MainActivity.this, "你展开了"+groups[groupPosition], Toast.LENGTH_LONG).show();
            }
        });
    }
}
```



# Activity

---

***Android应用有4大组件，分别是Activity（活动）、Service（服务）、Content Provider（内容提供者）和Broadcast Receiver（广播接收器）。其中，Activity是最常用的组件，它提供一个屏幕，用户可以用来交互，完成某项任务。一个程序通常会包括多个Activity，有一个Activity会被声明为主Activity，用户进入应用时第一个显示的就是主Activity，然后根据不同的操作跳转到其他Activity。***

-----

### 1.Activity的使用

***定义一个自己的Activity需要继承基类Activity，并且需要实现基类中的若干方法，其中必须实现的方法是onCreate（）方法，Activity刚启动的时候会回调该方法，所以可以在其中做一些初始化操作，其中最重要的是需要调用Activity的setContentView（View view）方法设置局部文件。***

#### 创建Activity示例：

```java
public class MainActivity extends Activity{继承基类Activity
protected void onCreate(Bundle savedInstanceState){//重写父类的onCreate方法
super.onCreate(savedInstanceState);
setContentView(R.layout.act_main);//调用setContentView 设置布局文件
    
}
}
```

#### 注意

在创建完成Activity之后，还需要在AndroidManifest.xml文件中对Activity进行配置，否则系统找不到定义的Activity。Activity的配置方法是在mainfest文件的<application/>元素中添加一个<activity/>元素

代码示例如下,其中android:name属性指定了MainActivity的位置

```xml
<manifest....>
    <application...>
    <activity android:name = "com.example.activity.MainActivity"/>
    ....
    </application...>
    ....
	</manifest....>
```

除了android:name 属性，在Activity中还可以配置一些其他属性，例如可以通过android:label指定Activity的书签，通过android:icon 指定Activity的图标，通过android:theme 指定 Activity的样式等。

另外，Activity通常还需要配置一个或多个<intent-filter></intent-filter>属性，用于指定该Activity可响应的Intent。

---

### 2.两个界面之间的跳转

应用程序一般都由多个界面组成，用户不同的操作会触发显示不同的界面，这就要求Activity之间可以实现跳转和数据交换。启动一个Activity有如下两种方法。

​    （1）startActivity(Intent intent):启动其他Activity。

​	（2）startActivityForResult(Intent intent,int requestCode):该方法不仅可以启动其他Activity，还可以接收其他Activity的返回结果，requestCode 标识请求的来源，可以自定义。

*** 上述两个方法的参数中均含有Intent类型的参数，Intent可以理解为”意图“，它可以设置将要启动的Activity，也可以携带部分数据。Intent重载了一系列putExtra方法用于传递数据，同时提供了一系列的get方法用于取出携带的数据。下面我们通过两个具体的案例介绍一下Activity的两种启动方式***

#### 案例1  用startActivity方法实现跳转

本实例定义了两个界面，在第1个界面中定义一个Button，用于单击进行跳转，第2个界面接收第1个界面传递的数据并将其显示出来。

##### 1.编写主界面

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">


    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="请输入姓名"/>
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/name"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/bt_jump"
        android:text="调用第二个activity"/>

    </LinearLayout>
```

##### 2.编写主界面后台代码

```java
package com.example.activity01;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.widget.EditText;


public class MainActivity extends AppCompatActivity {
    //声明
    Button bt_jump;
    EditText name;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //--------------------------------------------------------
        bt_jump = (Button) findViewById(R.id.bt_jump);

        bt_jump.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View view) {
                    //类：Intent 用来传递
                Intent intent = new Intent();
                intent.setClass(MainActivity.this, SecondActivity.class);
                //-------------使用Bundle类，来传递数据，封装字符串和组件，将二者建立关联
                Bundle bundle = new Bundle();
                name = (EditText)findViewById(R.id.name);
                String myName = name.getText().toString();
                bundle.putString("name",myName);
                //将bundle封装到intent里面；
                intent.putExtras(bundle);
//                startActivity(intent);
                //从其他界面来回传数据，根据第二个参数
                //请求码，有多个界面的时候，手动设置：2,3,4,0
                startActivityForResult(intent,1);
            }
        });
    }
    //重写方法

    /**
     *
     * @param requestCode 请求码
     * @param resultCode  结果码
     * @param data        intent  ,回传的data
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
            case 1:
                Bundle bundle = data.getExtras();   //表示intent的扩展对象；
                //假设回传的时候，bundle封装的key叫rt_str；
                String rt_str = bundle.getString("rt_str");
                name.setText(rt_str);
                break;
            default:break;


        }
    }

}
```

##### 3.secondActivity的界面

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tv_msg"
        android:text="第二个Activity"/>
    <!--返回数据到第一个界面 -->
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/rt_info"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/rt_btn"
        android:text="回传到界面1"/>
</LinearLayout>
```

##### 4.编写secondActivity后台代码

```java
package com.example.activity01;
import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.EditText;
import android.view.View;
import android.content.Intent;
import android.widget.TextView;
import androidx.annotation.Nullable;
import android.widget.Button;

public class SecondActivity extends AppCompatActivity{
    //重写onCreate()
    TextView tv_msg;
    Bundle bundle;
    Button rt_btn;
    Intent intent;
    EditText rt_info; //返回数据的文本框

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        //从这里来接受数据

        intent = this.getIntent();
        bundle = intent.getExtras(); //从intent来获取对象
        String myName = bundle.getString("name");
        tv_msg = (TextView) findViewById(R.id.tv_msg);
        tv_msg.setText("欢迎"+myName);
        rt_info = (EditText) findViewById(R.id.rt_info);

        //返回如何设置呢？
        rt_btn = (Button) findViewById(R.id.rt_btn);
        //设置该按钮的监听事件；
        rt_btn.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View view){
                //该变量应该写到这里来定义，单击按钮的时候，获取文本框的值
                String rt_str = rt_info.getText().toString();
                bundle.putString("rt_str",rt_str);
                intent.putExtras(bundle);
                //启动；设置结果
                SecondActivity.this.setResult(RESULT_OK,intent);
                SecondActivity.this.finish();
            }
        });



    }

}

```

##### 5.修改AndroidMainfest.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.activity01">

    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.Activity01"
        tools:targetApi="31">
        <activity
            android:name=".MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".SecondActivity"/>
    </application>

</manifest>
```

# 广播接收者

---

什么是广播接收者

Android系统中，内置了很多系统级别的广播，例如手机开机完成后会发送一条广播，电池电量不足时会发送一条广播等。

Android系统中提供了广播接收者BroadcastReceiver，广播接收者的作用就是接收来自系统或其他应用程序的广播，并作出回应。

## 广播接收机制

（1）.定义BroadcastReceiver广播接收器。创建一个BroadcastReceiver的子类，并重写onReceive()方法，该方法是广播接收处理方法，在接收到广播后会进行相应的逻辑处理。

（2）.注册BroadcastReceiver广播接收器。用于接收消息并对该消息进行响应。

（3）.发送广播。该过程将消息内容和用于过滤的信息封装起来，并进行广播。

（4）.执行。满足过滤条件的广播接收器接收广播信息，并执行onReceive()方法。

（5）.销毁。广播接收器不使用时将被销毁.

## 1.编写主界面

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/tv_msg"
        android:text="Hello World!"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <Button
        android:id="@+id/btnSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="发送"
        tools:layout_editor_absoluteX="170dp"
        tools:layout_editor_absoluteY="228dp" />

</LinearLayout>
```

## 2.编写主界面后台代码

```java
package com.example.broadcastdemo;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.widget.Button;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends AppCompatActivity {
    Button btnSend;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btnSend = (Button) findViewById(R.id.btnSend);

        //When we click the button ,go to Broadcast;
        btnSend.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View view) {
                //In the broadcast send message as same as Activity,by the Intent;
                Intent intent = new Intent();
                // set a behavior for broadcast
                intent.setAction("android.intent.action.receiverdemo");
                //? if send message? // send a message:Bundle
                intent.putExtra("msg","这是一个广播信息");
                //Now in the MainActivity class.
                MainActivity.this.sendBroadcast(intent);


            }
        });
    }
}
```

## 3.编写MyReceiver.java代码

```java
package com.example.broadcastdemo;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.text.TextUtils;
import android.util.Log;
/*
 *  自定义的广播接收类MyReceiver；抽象方法必须被实现；
 */
public class MyReceiver extends BroadcastReceiver {
    /**
     * @param context   上下文对象；
     * @param intent    传递消息的
     */
    @Override
    public void onReceive(Context context, Intent intent){
        // if is null ，nothing to do here
        if (intent == null)return;
        // get Action
        String action = intent.getAction();
        // judge if action is allowed;TextUtils 文本判断类
        // if action is not null and the second judge is equals;

        if (!TextUtils.isEmpty(action)&&"android.intent.action.receiverdemo".equals(action)){
            //get Extra String object,and can use Bundle object;
            String msg = intent.getStringExtra("msg");
            Log.i("+++++++ ","信息接收器： "+ msg);

        }



    }
}

```

## 4.修改AndroidMainfest.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.broadcastdemo">

    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.Broadcastdemo"
        tools:targetApi="31">
        <activity
            android:name=".MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <!--我们这里的action是自定义的行为，和MainActivity对应，复制即可-->
        <receiver android:name=".MyReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.receiverdemo"/>
            </intent-filter>
        </receiver>
    </application>

</manifest>
```

# 数据存储

---

所有的应用程序都会产生数据的存储和读写。例如，手机游戏可以保存用户当前玩到的关卡和分数，音乐播放器或视频播放器会记录用户的使用习惯，这些配置在用户关机重启之后仍然会保存，说明数据都保存在了文件中。Android为开发者封装了大量的API可以进行数据操作，对轻量级数据的读写可以使用SharedPrepfereces。如果想访问手机存储器上的数据，可以使用IO操作。另外，应用程序如果需要操作大量的数据，可以使用Android内置的SQLite数据库。



## SharedPreferences的简介

SharedPreferences 用于保存应用程序中少量的数据，例如音乐播放器的播放模式是顺序播放还是随机播放，手机游戏是否打开音效震动等，这些数据都可以用SharedPreferences保存。



## SharedPreferences的实例

---

1.编写主界面代码

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

<!-- 账户名 密码 是否保存？  移动端没有提示信息-->
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="请输入用户名"
        android:id="@+id/etName"
        android:textSize="24sp"/>
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:hint="请输入密码"
        android:id="@+id/etPwd"
        android:inputType="textPassword"
        android:textSize="24sp"/>
    <CheckBox
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:id="@+id/ckMark"
        android:text="记住密码"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnOk"
        android:layout_marginTop="20dp"
        android:text="确定"/>
    <!--etName, etPwd, ckMark, btnOk 四个界面对象 -->


</LinearLayout>
```

2.编写主界面后台代码

```java
package com.example.sp_demo01;

import androidx.appcompat.app.AppCompatActivity;

import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.CheckBox;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import android.view.View;

public class MainActivity extends AppCompatActivity {
    //获取之前的界面对象;将来代码和界面对象进行交互；
    Button btnOk;
    EditText etName,etPwd;
    CheckBox ckMark;
    //SharedPreferences 存储轻量的数据，键值对格式；
    //定义了三个常量：name password mark ,来表示存储的姓名，密码，是否选中
    final String KNAME = "name",KPWD = "password",KMARK = "mark";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //做了一个自定义的方法；
        initViews();
    }
    //      自定义的方法
    private void initViews() {
        SharedPreferences userInfo = getSharedPreferences("userInfo", MODE_PRIVATE);
        etName = (EditText) findViewById(R.id.etName);
        etPwd = (EditText) findViewById(R.id.etPwd);
        btnOk = (Button) findViewById(R.id.btnOk);
        ckMark = (CheckBox) findViewById(R.id.ckMark);

        //按钮的事件监听；
        btnOk.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                String name = etName.getText().toString().trim(); //trim is del two sides space
                String pwd = etPwd.getText().toString().trim();
                if ("".equalsIgnoreCase(name)||"".equalsIgnoreCase(pwd))
                    Toast.makeText(MainActivity.this,"账号或者密码不能为空",Toast.LENGTH_SHORT).show();
                else{
                    SharedPreferences userInfo = getSharedPreferences("user_info",MODE_PRIVATE);
                    SharedPreferences.Editor editor = userInfo.edit(); //get editor object;
                    //there three options for editors object do something;Attention to these three options are defined in the above;
                    editor.putString(KNAME,name);

                    editor.putBoolean(KMARK,ckMark.isChecked());

                    if (ckMark.isChecked())
                        editor.putString(KPWD,pwd); // 选中的时候才把保存密码；
                    else
                        editor.putString(KPWD,"");
                    //puting the commit
                    editor.commit();
                    Toast.makeText(MainActivity.this, "数据保存成功", Toast.LENGTH_SHORT).show();



                }
            }
        });
        //----------------------------------------------------监听事件结束----------------------------------------------------
        System.out.println("------"+userInfo.getString(KNAME,""));
        etName.setText(userInfo.getString(KNAME,""));  //?这个没有获取过来
        if(userInfo.getBoolean(KMARK,true)){
            etPwd.setText(userInfo.getString(KPWD,""));
            ckMark.setChecked(true);
        }else{
            etPwd.setText("");
            ckMark.setChecked(false);
        }

    }
}
```

---

# Fragement



1.知识点

---

1.概念



---

# 网络通信与服务

## 1.编写主界面

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/tv_1"
        android:text="下载并显示一张网络图片"
        android:textColor="@color/black"/>
    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/img_1"
        android:layout_weight="0.8"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/btn_1"
        android:text="开始下载"
        android:textColor="@color/black"/>
</LinearLayout>
```

## 2.编写主界面后台代码

```java
package com.example.geturldemo;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.MalformedURLException;
import android.os.AsyncTask;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.View;
import android.widget.ImageView;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.RadioButton;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {
    Button visitWebBtn,btn_1;
    TextView tv_1;
    ImageView img_1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //------------------------------------
        img_1 = (ImageView)findViewById(R.id.img_1);
        btn_1 = (Button) findViewById(R.id.btn_1);
        //create the listener of button for downloading the figure
        btn_1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //TODO: Auto-generated method stub
                String imgUrl;
                imgUrl ="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp8.itc.cn%2Fimages01%2F20210110%2Fe2ca29c919ad4892ae7dab7ef20797e1.jpeg&refer=http%3A%2F%2Fp8.itc.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1658260975&t=f01a4f1b47e987e084c7ad51321cf43d";
                //自建Web服务器上的图片URL
                //ImgUrl = "https://192.168.1.128:8080/AndroidHttp/img1"
                new DownImgAsyncTask().execute(imgUrl);
            }
        });

    }
    //从指定的URL获取图片
    private Bitmap getImageBitmap(String url) {
        URL imgUrl = null;
        Bitmap bitmap = null;
        try {
            //1.创建一个URL对象
            imgUrl = new URL(url);
            //2.获取HttpURLConnection对象实例
            HttpURLConnection conn = (HttpURLConnection) imgUrl.openConnection();
            conn.setDoInput(true);
            conn.connect();
            //3.获得服务器返回的输入流
            InputStream is = conn.getInputStream();
            //4.解码数据流
            bitmap = BitmapFactory.decodeStream(is);
            is.close();
            //5.断开链接
            conn.disconnect();
        } catch (MalformedURLException e) {
            //TODO AUTO-GENERATED CATCH BLOCK-
//            e.printStackTrace();
            Toast.makeText(this, "图片下载失败，请确定网络图片是否存在", Toast.LENGTH_LONG).show();
        } catch (IOException e) {
            //e.printStackTrace();
            Toast.makeText(this, "图片下载失败，请确定网络服务是否正常", Toast.LENGTH_LONG).show();
        }
        return bitmap;
    }
    //利用异步任务机制下载图片
    class DownImgAsyncTask extends AsyncTask<String, Void, Bitmap>{
        @Override
        protected void onPreExecute() {
            //TODO Auto-generated method stub
            super.onPreExecute();
            img_1.setImageBitmap(null);
        }
        @Override
        protected Bitmap doInBackground(String... params) {
            //TODO Auto-generated method stub
            Bitmap b = getImageBitmap(params[0]);
            return b;

        }
        @Override
        protected void onPostExecute(Bitmap result){
            //TODO Auto-generated method stub
            super.onPostExecute(result);
            if(result!=null){
                img_1.setImageBitmap(result);
            }
        }

    }



}
```

## 3.修改AndroidMainfest.xml文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.geturldemo">
    <!--注册网络访问权限 -->
    <uses-permission android:name="android.permission.INTERNET"/>
    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.Geturldemo"
        tools:targetApi="31">
        <activity
            android:name=".MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
```

